<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    />
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.tailwindcss.com"></script>

    <title>Analizador</title>
  </head>

  <body>
    <div class="head">
      <div class="logo">
        <a href="#">LOGO</a>
      </div>

      <nav class="navbar">
        <button onclick="toggleContent('info', 'scanner', 'parser', 'expresiones')">Nosotros</button>
        <button onclick="toggleContent('scanner', 'info', 'parser', 'expresiones')">Scanner</button>
        <button onclick="toggleContent('parser', 'info', 'scanner', 'expresiones')">Parser</button>
        <button onclick="toggleContent('expresiones', 'info', 'scanner', 'parser')">Expresiones Aritméticas</button>
      </nav>
    </div>

    <div id="info">
      <header class="content header">
        <h2 class="title">Inicio</h2>
        <p>SOMOS EL GRUPO 11 DE LENGUAJES Y COMPILADORES</p>
        <a href="#" class="btn"> Saber más</a>
      </header>

      <section class="content sau">
        <h2 class="title">TRABAJO</h2>
        <p>REALIZAMOS EL CÓDIGO DEL SCANNER Y DEL PARSER.</p>

        <div class="box-Container">
          <div class="box">
            <a href="#" class="btn"> SCANNER</a>
            <p>
              un "scanner" (también conocido como "analizador léxico") es una
              parte crucial del proceso de compilación. Su función principal es
              analizar el flujo de caracteres que componen el código fuente de
              un programa y convertirlos en una secuencia de "tokens" o
              "símbolos", que son unidades léxicas significativas para el
              compilador.
            </p>
          </div>

          <div class="box">
            <a href="#" class="btn"> PARSER</a>
            <p>
              El parser, o analizador sintáctico, es otra parte fundamental de
              un compilador. Después de que el scanner ha convertido el flujo de
              caracteres del código fuente en una secuencia de tokens, el parser
              toma estos tokens y los organiza en una estructura jerárquica que
              representa la gramática del lenguaje de programación.
            </p>
          </div>
        </div>
      </section>

      <section class="content price">
        <article class="contain"></article>
      </section>

      <section class="contenido about">
        <h2 class="title">nosotros</h2>
        <p>
          Somos un grupo de estudiantes de ingeniería de sistemas comprometidos
          con la innovación tecnológica. Nuestro objetivo es poder mostrarle
          nuestros conocimientos y aplicarlos en proyectos prácticos que tengan
          un impacto real en la sociedad.
        </p>
        <div class="box-container2">
          <div class="box">
            <img src="img/img/pic1.jpg" alt="" />
            <h3>Kevin Quispe</h3>
            <p>Ing.Sistemas</p>
            <div class="stars">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
            </div>
          </div>

          <div class="box">
            <img src="img/img/pic2.jpg" alt="" />
            <h3>Hans Ventura</h3>
            <p>Ing.Sistemas</p>
            <div class="stars">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
            </div>
          </div>

          <div class="box">
            <img src="img/img/pic3.jpg" alt="" />
            <h3>Piero Huayta</h3>
            <p>Ing.Sistemas</p>
            <div class="stars">
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
              <i class="fas fa-star"></i>
            </div>
          </div>
        </div>
      </section>

      <section class="content contact">
        <h2 class="title">GRACIAS</h2>
        <div class="footer-section">
          <div>
            <p>por su visita</p>
          </div>

          <figure>
            <img
              src="img/img/UNMSM-LOGO.png"
              height="200px"
              width="100%"
              alt="mapa"
            />
          </figure>
        </div>
      </section>
    </div>

    <!-- SCANNER -->
    <div id="scanner" class="main" style="display: none">
      <div class="idk">
        <button
          class="button"
          style="background-color: #3e9141"
          onclick="getToken()"
        >
          Escanear
        </button>
        <span class="flex text-white font-normal">
          mientras(a < b) c = a + b; si(b && 2) real d = 2.5 + 4.12 * 1; fin_si
          entero e = 2; fin_mientras</span
        >
        <div class="centered-content">
          <textarea
            class="code-editor"
            id="scanner-input"
            placeholder="Ej: &#09;entero a, b;&#10;&#09;entero b, c = 3;&#10;&#09;real x,suma, y=48;&#10;&#09;&#10;&#09;si(x<8)&#10;&#09;   real a=3.5*2+1*10;&#10;&#09;fin_si"
            style="width: 70%"
            oninput="scanner.content = this.value; scanner.index = 0"
            onchange="scanner.content = this.value; scanner.index = 0"
          ></textarea>
          <textarea
            class="code-editor"
            placeholder="Token..."
            style="width: 30%; font-style: italic; font-size: 14px"
            disabled
          ></textarea>
        </div>
      </div>
    </div>

    <!-- PARSER -->
    <div id="parser" class="main" style="display: none">
      <div class="idk">
        <button
          class="button"
          style="background-color: #b64f20"
          onclick="parseString()"
        >
          Parse
        </button>
        <span class="flex text-white font-normal">
          mientras(a < b) c = a + b; si(b && 2) real d = 2.5 + 4.12 * 1; fin_si
          entero e = 2; fin_mientras</span
        >
        <div class="centered-content">
          <textarea
            class="code-editor"
            id="parser-input"
            placeholder="Ej: &#09;entero a, b;&#10;&#09;entero b, c = 3;&#10;&#09;real x,suma, y=48;&#10;&#09;&#10;&#09;si(x<8)&#10;&#09;   real a=3.5*2+1*10;&#10;&#09;fin_si"
            style="width: 70%"
            oninput="scanner.content = this.value; scanner.index = 0; parser.message = ''"
            onchange="scanner.content = this.value; scanner.index = 0; parser.message = ''"
          ></textarea>
          <textarea
            class="code-editor"
            placeholder="Resultado..."
            style="width: 30%; font-style: italic; font-size: 14px"
            disabled
          ></textarea>
        </div>
      </div>
    </div>
            <div id="expresiones" class="main" style="display: none">
      <div class="idk">
        <button class="button" style="background-color: #4a90e2" onclick="interpretCode()">Interpretar</button>
        <span class="flex text-white font-normal">Expresiones aritméticas simples</span>
        <div class="centered-content">
          <textarea class="code-editor" id="codeInput" placeholder="Ej: 3 + 5 * (2 - 4) / 2" style="width: 70%"></textarea>
          <textarea class="code-editor" id="output" placeholder="Resultado..." style="width: 30%; font-style: italic; font-size: 14px" disabled></textarea>
        </div>
      </div>
    </div>
  </body>
  <style>
    .main {
      height: 100%;
      justify-content: space-evenly;
      align-items: end;
      gap: 2rem;
      padding-bottom: 2rem;
    }
    .button {
      padding: 10px 20px;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      width: 220px;
      margin-top: 1rem;
    }
    .code-editor {
      height: 100%;

      background-color: #383838e5;
      color: rgb(207, 207, 207);
      font-family: monospace; /* Use a monospaced font for code */
      font-size: 17px; /* Adjust the font size as needed */
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;

      box-sizing: border-box; /* Include padding and border in the element's total width and height */
    }
    .idk {
      display: flex;
      flex-direction: column;
      height: 100%;
      width: 100%;
      margin-left: 4rem;
      margin-right: 4rem;
      gap: 2rem;
    }
    .centered-content {
      display: flex;
      justify-content: space-evenly;
      align-items: center;
      flex-grow: 1;
      gap: 4rem;
    }
  </style>
  <script src="scanner.js"></script>
  <script src="parser.js"></script>
  <script src="expresionesaritmeticas.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function () {
      var parserTextArea = document.getElementById("parser-input");
      parserTextArea.addEventListener("keydown", function (event) {
        if (event.key === "Tab") {
          event.preventDefault();

          var start = this.selectionStart;
          var end = this.selectionEnd;

          // Set the value of the textarea to itself plus a tab character at the cursor position
          this.value =
            this.value.substring(0, start) + "\t" + this.value.substring(end);

          // Move the cursor to the right place
          this.selectionStart = this.selectionEnd = start + 1;
        }
      });
      var scannerTextArea = document.getElementById("scanner-input");
      scannerTextArea.addEventListener("keydown", function (event) {
        if (event.key === "Tab") {
          event.preventDefault();

          var start = this.selectionStart;
          var end = this.selectionEnd;

          // Set the value of the textarea to itself plus a tab character at the cursor position
          this.value =
            this.value.substring(0, start) + "\t" + this.value.substring(end);

          // Move the cursor to the right place
          this.selectionStart = this.selectionEnd = start + 1;
        }
      });
    });

  </script>
  <script>
    let scanner = new Scanner("");
    let parser = new Parser(scanner);

    function getToken() {
      let token = scanner.scan();
      document.querySelectorAll(
        ".code-editor"
      )[1].value = `${token.value}\n\n(${token.type})`;
    }
    function parseString() {
      let result = parser.parse();
      if (!result) {
        document.querySelectorAll(".code-editor")[3].value = parser.message;
        return;
      }
      document.querySelectorAll(".code-editor")[3].value =
        "La cadena es correcta";
    }
    function toggleContent(showElementId, hideElementId, hideElementId2) {
      var showElement = document.getElementById(showElementId);
      var hideElement = document.getElementById(hideElementId);
      var hideElement2 = document.getElementById(hideElementId2);

      if (showElementId === "scanner" || showElementId === "parser") {
        showElement.style.backgroundColor = "#161616";
        showElement.style.display = "flex";
        hideElement.style.display = "none";
        hideElement2.style.display = "none";
      } else {
        showElement.style.display = "block";
        hideElement.style.display = "none";
        hideElement2.style.display = "none";
      }
    }
  </script>
</html>
